<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Quentin Ligier"><link href=https://qligier.github.io/cara-emed-ig/other/upcoming_changes/ rel=canonical><link href=../authorship_and_timestamps/ rel=prev><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>Upcoming Changes - CARA's eMedication IG</title><link rel=stylesheet href=../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=stylesheet href=../../css/timeago.css><link rel=stylesheet href=../../stylesheets/cara.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#currently-deployed class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="CARA's eMedication IG" class="md-header__button md-logo" aria-label="CARA's eMedication IG" data-md-component=logo> <img src=../../assets/cara.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> CARA's eMedication IG </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Upcoming Changes </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/qligier/cara-emed-ig title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../transactions/ class=md-tabs__link> Transactions </a> </li> <li class=md-tabs__item> <a href=../../workflows/ class=md-tabs__link> Workflows </a> </li> <li class=md-tabs__item> <a href=../../emed/ class=md-tabs__link> CH EMED EPR </a> </li> <li class=md-tabs__item> <a href=../../appc/ class=md-tabs__link> PMP-APPC </a> </li> <li class=md-tabs__item> <a href=../../endpoints/ class=md-tabs__link> Endpoints </a> </li> <li class=md-tabs__item> <a href=../../oids/ class=md-tabs__link> OIDs </a> </li> <li class=md-tabs__item> <a href=../authorship_and_timestamps/ class=md-tabs__link> Authorship & Timestamps </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Upcoming Changes </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="CARA's eMedication IG" class="md-nav__button md-logo" aria-label="CARA's eMedication IG" data-md-component=logo> <img src=../../assets/cara.svg alt=logo> </a> CARA's eMedication IG </label> <div class=md-nav__source> <a href=https://github.com/qligier/cara-emed-ig title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../transactions/ class=md-nav__link> <span class=md-ellipsis> Transactions </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../workflows/ class=md-nav__link> <span class=md-ellipsis> Workflows </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../emed/ class=md-nav__link> <span class=md-ellipsis> CH EMED EPR </span> </a> </li> <li class=md-nav__item> <a href=../../appc/ class=md-nav__link> <span class=md-ellipsis> PMP-APPC </span> </a> </li> <li class=md-nav__item> <a href=../../endpoints/ class=md-nav__link> <span class=md-ellipsis> Endpoints </span> </a> </li> <li class=md-nav__item> <a href=../../oids/ class=md-nav__link> <span class=md-ellipsis> OIDs </span> </a> </li> <li class=md-nav__item> <a href=../authorship_and_timestamps/ class=md-nav__link> <span class=md-ellipsis> Authorship & Timestamps </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Upcoming Changes </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Upcoming Changes </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#currently-deployed class=md-nav__link> <span class=md-ellipsis> Currently Deployed </span> </a> </li> <li class=md-nav__item> <a href=#known-issues class=md-nav__link> <span class=md-ellipsis> Known Issues </span> </a> </li> <li class=md-nav__item> <a href=#next-release-dates class=md-nav__link> <span class=md-ellipsis> Next Release Dates </span> </a> </li> <li class=md-nav__item> <a href=#relevant-changes class=md-nav__link> <span class=md-ellipsis> Relevant Changes </span> </a> <nav class=md-nav aria-label="Relevant Changes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pmp-v061 class=md-nav__link> <span class=md-ellipsis> PMP v0.6.1 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v060 class=md-nav__link> <span class=md-ellipsis> PMP v0.6.0 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v055 class=md-nav__link> <span class=md-ellipsis> PMP v0.5.5 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v052 class=md-nav__link> <span class=md-ellipsis> PMP v0.5.2 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v050 class=md-nav__link> <span class=md-ellipsis> PMP v0.5.0 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v0413 class=md-nav__link> <span class=md-ellipsis> PMP v0.4.13 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v0412 class=md-nav__link> <span class=md-ellipsis> PMP v0.4.12 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v049 class=md-nav__link> <span class=md-ellipsis> PMP v0.4.9 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v048 class=md-nav__link> <span class=md-ellipsis> PMP v0.4.8 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v045 class=md-nav__link> <span class=md-ellipsis> PMP v0.4.5 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v044 class=md-nav__link> <span class=md-ellipsis> PMP v0.4.4 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v040 class=md-nav__link> <span class=md-ellipsis> PMP v0.4.0 </span> </a> </li> <li class=md-nav__item> <a href=#pmp-v030 class=md-nav__link> <span class=md-ellipsis> PMP v0.3.0 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Upcoming Changes</h1> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Note that possible changes on Husky or other libraries/dependencies are not listed here and it is up to integrators to keep track of them.</p> </div> <h2 id=currently-deployed>Currently Deployed</h2> <ul> <li>dev:<ul> <li>PMP (aggregator) v0.6.1 (deployed 2025-11-27), works with <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/index.html>CH EMED EPR 2.0.0</a>.<ul> <li>Platform migration to BINT.</li> </ul> </li> <li>ALPAGE v0.1.2 (deployed 22025-11-27, DB truncated)</li> </ul> </li> <li>int:<ul> <li>PMP (aggregator) v0.5.2 (deployed 2025-09-05), works with <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/index.html>CH EMED EPR 2.0.0</a>.</li> <li>ALPAGE v0.1.0 (deployed 2025-05-21, DB recreated)</li> </ul> </li> </ul> <h2 id=known-issues>Known Issues</h2> <ul> <li>Aggregator:<ul> <li>The aggregator might accept bad ids within a treatmentplan extension. This might have implications for client traversing a PML document and relying on these ids to be good.</li> </ul> </li> </ul> <h2 id=next-release-dates>Next Release Dates</h2> <ul> <li>Next CH EMED EPR version release: <em>TBD</em></li> <li>Next aggregator release: <em>TBD</em></li> </ul> <h2 id=relevant-changes>Relevant Changes</h2> <h3 id=pmp-v061>PMP v0.6.1</h3> <p>Bugfixes for unexepected issues encountered due to dependencies bump on 0.6.0.</p> <h3 id=pmp-v060>PMP v0.6.0</h3> <p>This version updates dependencies, including using Husky 3.2.0 release (and not a snapshot) with the same bugfixes from 0.5.5. Additionally, the aggregator now checks that the references within the extensions of medication request changed and medication statement changed resources conveyed within an ITI-41 PADV CHANGE transaction, are good (the ids exist and refer to the proper entity). This adds not only a more thorough check on the validity of FHIR content, but also ensures that a PML generated by the aggregator can be properly traversed (e.g. via Husky convenience methods) and the original medication statement resource can be fetched from the changed resource information.</p> <p>This version will be deployed along the configuration to connect the PMP to CARA&rsquo;s new EPR platform, on a first stage on ws-pmp-int.cara.ch and ws-pmp-dev.cara.ch and at a later stage on production (HUG pilot). The old Post platform will no longer be supported by the PMP after deployments of this version (or newer).</p> <h3 id=pmp-v055>PMP v0.5.5</h3> <p>This version uses a snapshot of Husky 3.2.0 which has not been yet released, and that fixes several bugs preventing PMLC PDF generation for medications for which an ingredient is specified without a known SNOMED code and for certain cases of dosages with a specified max dosage per period.</p> <h3 id=pmp-v052>PMP v0.5.2</h3> <ul> <li>Relevant fixes:<ul> <li>Fixed bug preventing ITI-68 transactions from succeeding.</li> <li>Fixed bug preventing ITI-104 transactions for patients with no PMP-PID in the MPI from succeeding.</li> <li>Fixed Husky-based validation of submitted documents to the aggregator being done against CH EMED instead of CH EMED EPR, hence allowing invalid content (since CH EMED EPR is more constrained) to be submitted to the PMP. This would imply that upon generation of a PML or PMLC document, the aggregator would fail to produce a valid document, since these were correctly being validated against the CH EMED EPR specs.</li> <li>The document validator will properly check the first <strong>human</strong> author instead of simply the first author of the composition for its checks.</li> </ul> </li> <li>Made XUA signature validation stricter, when enabled.</li> <li>Misc. internal improvements and tracing and preparation for production deployment.</li> </ul> <h3 id=pmp-v050>PMP v0.5.0</h3> <ul> <li>Works with the newly released <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0>CH EMED EPR 2.0.0</a>, see the CH EMED EPR 2.0.0 <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/changelog.html>changelog</a> for detailed changes:<ul> <li>Units: <ul> <li>Added <code>Bq</code>, <code>kBq</code>, <code>MBq</code>, <code>GBq</code>, <code>nmol</code>, <code>413568008</code> (<em>Application</em>) and <code>246205007</code> (<em>Quantity</em>).</li> <li><code>{Piece}</code> has been removed, please use the SNOMED <code>246205007</code> (<em>Quantity</em>) code instead.</li> <li>Added <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/artifacts.html#5>concept maps</a> to provide guidance to map to/from HCI&rsquo;s CdTyp9 unit codes. Please bear in mind that these are provided on a best effort basis and that they are by no means of normative value and in no way sanctioned by eHealthSuisse or any other entity.</li> <li>A new invariant has been added to all medication statement, medication request and medication dispense profiles to enforce that all dosage elements within each one of said resources uses the same unit. <em>E.g.</em> if the base dosage element specifies a dose of 1 tablet for the morning, then a split dosage element cannot say 2g in the evening.</li> </ul> </li> <li>PMLC:<ul> <li>Medication statements now contain a new <code>lastConsideredDocument</code> extension, always filled by the aggregator. This extension contains the identifier of the last document that was used for aggregating data resulting in this PMLC medication statement. This includes PADV comments. This extension might be of use for implementers wishing to <em>detect</em> whether new changes or comments have been performed on a treatment line since last import.</li> </ul> </li> <li>PML:<ul> <li>Changed medication request resources and changed medication statement resources added by the aggregator to a PML now conform to the new <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/StructureDefinition-ch-emed-epr-medication-request-changed-list.html><code>CHEMEDEPRMedicationRequestChangedList</code></a> and <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/StructureDefinition-ch-emed-epr-medicationstatement-changed-list.html><code>CHEMEDEPRMedicationStatementChangedList</code></a> profiles.</li> </ul> </li> <li>Misc:<ul> <li>Added a new warning invariant to all composition profiles that will check whether the composition title is correct according to the specified composition&rsquo;s language.</li> <li>Added a constraint to all base dosages (<a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/StructureDefinition-ch-emed-epr-dosage.html>CHEMEDEPRDosage</a> and <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/StructureDefinition-ch-emed-epr-dosage-medicationrequest.html>CHEMEDEPRDosageMedicationRequest</a>) that will result in a warning if the <code>.text</code> element is missing or blank.</li> <li>Examples have been added and some updated.</li> <li>Added a new guidance page on <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/guidance_comments.html>comments/notes</a>.</li> <li>Fixed the <code>time-quantity-only-integer</code> constraint on the <a href=https://fhir.ch/ig/ch-emed-epr/2.0.0/StructureDefinition-ch-emed-epr-time-quantity.html>CHEMEDEPRTimeQuantity</a> profile that was effectively preventing a structured max dose (<code>maxDosePerPeriod</code>) from being used.</li> </ul> </li> </ul> </li> <li>Added support for the following transactions:<ul> <li>CH EPR FHIR (MHD) (XUA token only, for now):<ul> <li><a href=../../transactions/iti65/ >ITI-65 (Provide Document Bundle)</a></li> <li><a href=../../transactions/iti67/ >ITI-67 (Find Document References)</a></li> <li><a href=../../transactions/iti68/ >ITI-68 (Retrieve Document)</a></li> <li><a href=../../transactions/chmhd1/ >CH:MHD-1 (Update Document Metadata)</a></li> <li><a href=../../transactions/chatc/ >CH:ATC (Audit Trail Consumption)</a></li> </ul> </li> <li><a href=../../transactions/chpharm5/ >CH:PHARM-5</a> (XUA token only, for now)</li> <li>PIXm (no token):<ul> <li><a href=../../transactions/iti83/ >ITI-83 (Mobile Patient Identifier Cross-reference Query)</a></li> <li><a href=../../transactions/iti104/ >ITI-104 (Patient Identity Feed)</a></li> </ul> </li> <li><a href=../../transactions/iti20/ >RESTful ATNA Feed</a></li> </ul> </li> <li>PML documents are now properly generated for treatments containing changed medication requests or changed medication statements.</li> <li>PMLC PDF:<ul> <li>The aggregator allows clients to request the PMLC PDF to be in eMediplan format. See the <a href=../../transactions/chpharm1/ >CH:PHARM-1</a> page for more information on this.</li> <li>CARA&rsquo;s PDF format:<ul> <li>Improved display of dosage when quantity is provided but not the when.</li> <li>Added display of active ingredients (if provided) under the medication name.</li> </ul> </li> </ul> </li> <li>Updated codes from the Swiss EPR to use the values from the 202406.2-stable release. See <a href=../../transactions/iti41/ >ITI-41</a> to verify some of the values.</li> <li>Added antivirus scan capabilities. PDFs attached to files uploaded to the eMedication service might now be scanned for threats before being accepted. This will work as follows depending on the different environments. For both ws-pmp-int and ws-pmp-dev, a local ClamAV service will be used for scanning. If the binary does not pass the scan or if the scan fails for whatever reason, the submission will be rejected.</li> <li>Misc. improvements, fixes and better audit log generation.</li> </ul> <h3 id=pmp-v0413>PMP v0.4.13</h3> <p>Minor fixes and improved audit log generation.</p> <h3 id=pmp-v0412>PMP v0.4.12</h3> <p>No relevant changes. Version deployed with a workaround for a problem with the routes of administration on PMLC generation while waiting for the next release of Husky to fix the issue. See https://github.com/project-husky/husky/issues/153</p> <h3 id=pmp-v049>PMP v0.4.9</h3> <ul> <li>Fixed several bugs affecting the application of matching APPC policy sets (problems with access rights).</li> <li>All the notes received with any resource are now aggregated (e.g. a note provided with a <code>MedicationStatement</code> resource within an MTP document).</li> <li>All the aggregated comments/notes, for both medication treatment and medication treatment instance(s), will be now added to the PMLC medication statements. Previously only treatment comments were added to the PMLC.</li> <li>Fixed bug on aggregation of PADV CANCEL targeting a PRE, preventing the transaction from completing.</li> <li>Improved audit trail log generation for ITI-18 and PHARM-1 transactions (WIP for all transactions).</li> </ul> <h3 id=pmp-v048>PMP v0.4.8</h3> <p>The aggregator can enable and disable the application of APPC rules (for debugging purposes) with a restart of the service, no redeployment needed.</p> <h3 id=pmp-v045>PMP v0.4.5</h3> <p>The aggregator has again disabled the application of APPC rules to unblock integration tests in dev and until better debugging information is added to the affected code.</p> <h3 id=pmp-v044>PMP v0.4.4</h3> <p>The aggregator has reactivated the application of APPC rules to grant or deny access rights to the PMP. An exception has been kept for TCUs to always allow TCUs right of publication:</p> <ul> <li>TCU access rules have not yet been defined by CARA.</li> <li>Some systems like Presco have yet to transition from TCU publication to HCP publication (to be done before pilot phase).</li> </ul> <h3 id=pmp-v040>PMP v0.4.0</h3> <p>The PMP is abandoning the use of CARA&rsquo;s MPI-PID as XAD-PID and with the v0.4.0 starts a transition period towards the use of a PMP-PID (<em>PMP assigned patient id</em>) as XAD-PID in order to pave the road to support systems with patients from other reference communities. What this entails for PMP v0.4.0:</p> <ul> <li>Patient registration:<ul> <li>Query: an ITI-45 query (added with v0.3.0) allows a system to know if a patient has a PMP registration (whether active or not) and to fetch the PMP-PID.</li> <li>Add: to register a patient, the following steps will be needed:<ol> <li>Perform an ITI-44 <em>Patient Registry Record <strong>Added</strong></em> (PIXV3 feed) to add the new patient to the PMP.</li> <li>Fetch the PMP-PID with an ITI-45 query to the PMP.</li> <li>Perform an ITI-41 with the APPC document to activate the registration. Until this is done, no other transaction for providing, fetching or searching documents will be accepted.</li> </ol> </li> </ul> </li> <li>All requests (other than PIX) expect now the use of PMP-PID ids (SubmissionSet.patientId and DocumentEntry.patientId). Systems can continue to use CARA&rsquo;s MPI-PIDs for this and the aggregator will perform a translation but include a warning with the response. The grace period for transitioning towards PMP-PIDs has not been defined. Note that PMP-PIDs will not be the same for the same patients in different environments, see <a href=../../oids/ >OIDs</a> for the each deployed platform&rsquo;s patient identification domain id.</li> </ul> <h3 id=pmp-v030>PMP v0.3.0</h3> <p>Relevant changes from (upcoming) CH EMED EPR 1.0.0 based on CH EMED 4.0.0 (the latter should be published before the end of the current year):</p> <ul> <li>Authorship and authorship timestamps. Please refer to the <a href=https://build.fhir.org/ig/hl7ch/ch-emed/authorship.html>CH EMED authorship guidance page</a> for further reading:<ul> <li>All eMed entries will <strong>require</strong> the relevant authorship and authorship timestamp fields to be filled (i.e. <code>1..1</code> cardinality):<ul> <li><code>MedicationStatement</code> resources (MTP, PADV, PML, PMLC docs):<ul> <li><code>.informationSource</code> shall refer to the author of the medical decision.</li> <li><code>.dateAsserted</code> shall specify the date of said medical decision (treatment plan).</li> </ul> </li> <li>All <code>MedicationRequest</code> resources (PRE, PADV, PML docs):<ul> <li><code>.requester</code> shall refer to the author of the medical decision.</li> <li><code>.authoredOn</code> shall specify the date of said medical decision (prescription).</li> </ul> </li> <li>All <code>MedicationDispense</code> resources (DIS, PML docs):<ul> <li><code>.performer.actor</code> shall refer to the author of the medical decision (dispense).</li> <li><code>.whenHandedOver</code> shall specify the date of the dispense.</li> </ul> </li> <li>All <code>Observation</code> resources (PADV, PML docs):<ul> <li><code>.performer</code> shall refer to the author of the observation.</li> <li><code>.issued</code> shall specify the date of the observation.</li> </ul> </li> </ul> </li> <li>All <code>Composition</code> resources:<ul> <li>No changes to the composition <code>.author</code>: this shall contain the author of the <strong>document</strong>, which may match any eMed entry&rsquo;s author but not necessarily (e.g. an assistant adding an MTP to the PMP on behalf of a practitioner would be the composition author while the practitioner would be the entry&rsquo;s author).</li> <li>eMed sections of <code>Composition</code> resources will no longer support the <code>.author</code> element, which previously would optionally specify a medical author if different from the document (i.e. composition) author.</li> </ul> </li> <li>PML and PMLC eMed entries shall continue (as it is already the case) to include the <code>authorDocument</code> extension if for the last aggregated entry the document author differs from the entry&rsquo;s author. Note that as per the rules above, the author of the entry (i.e. medical author) is always included in the entry.</li> </ul> </li> <li>Changes to CH EMED&rsquo;s <code>UnitCode</code> value set:<ul> <li>Several UCUM annotations have been replaced by equivalent SNOMED codes, please refer to <a href=https://fhir.ch/ig/ch-emed/ValueSet-UnitCode.html>CH EMED <code>UnitCode</code></a><ul> <li><code>{Piece}</code> remains valid for now in the value set because the equivalent SNOMED term is missing, this will be solved for the next version of CH EMED when it should be replaced by a SNOMED code.</li> </ul> </li> <li>The UnitCode-based <a href=https://build.fhir.org/ig/CARA-ch/ch-emed-epr/ValueSet-ch-emed-epr-amount-quantity-unit-code.html><code>CHEMEDEPRAmountQuantityUnitCode</code></a> value set reflects those changes.</li> </ul> </li> <li>Removed <code>N</code> from the <a href=https://build.fhir.org/ig/CARA-ch/ch-emed-epr/ValueSet-ch-emed-epr-amount-quantity-unit-code.html><code>CHEMEDEprActSubstanceAdminSubstitutionCode</code></a> value set. This affects <code>MedicationDispense</code> resources only:<ul> <li>The value set now contains only <code>E</code> as allowed code.</li> <li>New CH EMED constraint: if no substitution has been performed, the <code>MedicationDispense.substitution.type</code> element SHALL NOT be present (see constraint <code>ch-emed-dis-1</code> on either the CH EMED or CH EMED EPR resource definition).</li> </ul> </li> <li>Te CH EMED EPR IG reflects now that the <code>prescription</code> extension of the <code>MedicationDispense</code> resource is supported. <ul> <li>If the treatment has been prescribed, the aggregator&rsquo;s logic will continue to enforce that this extension is filled and that it references a valid prescription for the same treatment.</li> </ul> </li> <li>For all eMed resources, <code>note.time</code> shall not be supported any more: it is assumed that the time is the same as for the entry&rsquo;s authorship.<ul> <li>With the exception of the PMLC <code>CHEMEDEPRMedicationStatementCard</code> that will continue to include <code>note.time</code> for each note.</li> </ul> </li> <li><code>MedicationRequest.validityPeriod</code> is now optional, i.e. cardinality is <code>0..1</code>.<ul> <li>If not specified, start is assumed to be the <code>MedicationRequest.authoredOn</code> date.</li> <li>If not specified, end is assumed to be <em>the end of time</em>, i.e. the request remains valid indefinitely to the aggregator.</li> </ul> </li> </ul> <p>Other aggregator changes:</p> <ul> <li><code>FindMedicationCard</code> queries will support the <code>ServiceStartFrom</code>, <code>ServiceStartTo</code>, <code>ServiceEndFrom</code>, <code>ServiceEndTo</code> parameters and apply them as follows:<ul> <li>The consolidated (i.e. aggregated) start date of returned treatments must be between the specified <code>ServiceStartFrom</code> and <code>ServiceStartTo</code> parameters.<ul> <li>If <code>ServiceStartFrom</code> is not specified, any treatment starting before the specified <code>ServiceStartTo</code> will meet the service start criterium.</li> <li>If <code>ServiceStartTo</code> is not specified, any treatment starting at or after the specified <code>ServiceStartFrom</code> will meet the service start criterium.</li> <li>If neither <code>ServiceStartFrom</code> nor <code>ServiceStartTo</code> are specified, all treatments starting at any date will meet the service start criterium.</li> <li>Note that if a treatment does not have an explicit start date provided by a published document, it is assumed by the aggregator to be the date of creation of the MTP.</li> </ul> </li> <li>The consolidated end date of returned treatments must be between the specified <code>ServiceEndFrom</code> and <code>ServiceEndTo</code> parameters.<ul> <li>If <code>ServiceEndFrom</code> is not specified, any treatment ending before the specified <code>ServiceEndTo</code> will meet the service end criterium.</li> <li>If <code>ServiceEndTo</code> is not specified, any treatment ending at or after the specified <code>ServiceEndFrom</code> will meet the service end criterium.</li> <li>If neither <code>ServiceEndFrom</code> nor <code>ServiceEndTo</code> are specified, all treatments ending at any date will meet the service end criterium.</li> <li>Note that if a treatment does not have an explicit end date provided by a published document, it is assumed by the aggregator to be <em>the end of time</em>, i.e. will have no end date.</li> </ul> </li> </ul> </li> <li>Implementation of XDS <code>ServiceStartFrom</code>, <code>ServiceStartTo</code>, <code>ServiceEndFrom</code>, <code>ServiceEndTo</code> criteria for all ITI-18 and PHARM-1 queries.<ul> <li><code>ITI-18</code> queries will match the criteria ranges against the stored metadata <code>XDSDocumentEntry.serviceStartTime</code> and <code>XDSDocumentEntry.serviceStopTime</code> as provided at ITI-41 time. See <a href=../../transactions/date_processing/ >date processing</a>.</li> <li><code>PHARM-1</code> subqueries:<ul> <li><code>FindMedicationTreatmentPlans</code>, <code>FindMedicationList</code> and <code>FindMedicationCard</code> follow the same logic explained on the previous point.</li> <li><code>FindPrescriptions</code>, <code>FindPrescriptionsForValidation</code> and <code>FindPrescriptionsForDispense</code> will apply the criteria against the consolidated prescription&rsquo;s validity period. <ul> <li>The prescription validy start date shall match if:<ul> <li>Greater or equal than <code>ServiceStartFrom</code> if specified.</li> <li>Lesser than <code>ServiceStartTo</code> if specified.</li> </ul> </li> <li>The prescription validty end date shall match if:<ul> <li>Greater of equal than <code>ServiceEndFrom</code> if specified.</li> <li>Lesser than <code>ServiceEndTo</code> if specified.</li> </ul> </li> <li>If a prescription does not specify a validity period start date, it is assumed to be the date of medical authorship (i.e. <code>authoredOn</code>).</li> <li>If a prescription does not specify a validity period end date, it is assumed to not have an end date and hence any specified <em>&hellip;To</em> parameter should match.</li> </ul> </li> <li><code>FindDispenses</code> will apply the criteria against a single date, which is the date of dispense (i.e. <code>whenHandedOver</code>).</li> </ul> </li> </ul> </li> <li>Support for a new custom parameter for <code>FindMedicationCard</code> queries, <code>$PMLCIncludeNonActive</code> has been added. If specified and <code>true</code>, it will include all the (aggregated) treatments (constrained by the specified dates criteria) for the patient, whether they are active or not (i.e. it will include also suspended or cancelled treatments). These treatments will be included as medication statements in the content of the PMLC document but will not be added to the generated PDF. Support for this parameter is already included since version (<code>2.1.2</code>) of <a href=https://github.com/project-husky/husky>Husky</a>.</li> <li>Support for ITI-45 (PIXV3 queries) requests. The aggregator recognizes 3 possible data sources: CARA&rsquo;s MPI&rsquo;s assigning authority OID, the Swiss Central Compensation Office&rsquo;s and the PMP&rsquo;s own patient identity domain.</li> <li>A new PMP-PID is generated by the PMP and assigned to the patient upon registration (i.e. new APPC submission).</li> </ul> <hr> <div class="md-source-file last-edited"> <svg xmlns=http://www.w3.org/2000/svg class="icon icon-tabler icon-tabler-clock-edit" width=24 height=24 viewbox="0 0 24 24" stroke-width=2 stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round> <path stroke=none d="M0 0h24v24H0z" fill=none></path> <path d="M21 12a9.001 9.001 0 1 0 -9.972 8.948c.32 .034 .644 .052 .972 .052"></path> <path d="M12 7v5l2 2"></path> <path d="M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z"></path> </svg> This page was updated <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="November 27, 2025 15:39:29 UTC"><span class=timeago datetime=2025-11-27T15:39:29+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="November 27, 2025 15:39:29 UTC">2025-11-27</span> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.top", "search.suggest", "toc.integrate"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.e71a0d61.min.js></script> <script src=../../js/timeago.min.js></script> <script src=../../js/timeago_mkdocs_material.js></script> </body> </html>